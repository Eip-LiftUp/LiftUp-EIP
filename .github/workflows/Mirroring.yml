name: Mirroring_to_Epitech

env:
  MIRRORING_REPO: git@github.com:EpitechPGE3-2025/G-EIP-600-NCE-6-1-eip-6.git

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  push_to_mirror:
      runs-on: ubuntu-latest
      if: |
        startsWith(github.ref, 'refs/heads/ga-ignore-') == false &&
        github.repository != 'EpitechPGE3-2025/G-EIP-600-NCE-6-1-eip-6'
      steps:                                              # <-- must use actions/checkout before mirroring!
        - uses: actions/checkout@v4
          with:
            fetch-depth: 0
        - uses: pixta-dev/repository-mirroring-action@v1
          with:
            target_repo_url:
              ${{ env.MIRRORING_REPO }}
            ssh_private_key:                              # <-- use 'secrets' to pass credential information.
              ${{ secrets.GIT_SSH_PRIVATE_KEY }}
